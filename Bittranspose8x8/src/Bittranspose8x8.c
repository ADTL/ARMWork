/*
 ============================================================================
 Name        : Bittranspose8x8.c
 Author      : 
 Version     :
 Copyright   : Your copyright notice
 Description : Hello World in C, Ansi-style
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

typedef uint8_t uint8;

uint8 font[];
char * binary(uint8 u);

#define bit(x, p)  ((x)>>(p) & 1 != 0)

int main(void) {
	uint8 bytesize = 8;
	uint8 bits;

	puts("!!!Hello World!!!"); /* prints !!!Hello World!!! */

	uint8 * bmap;
	for(uint8 c = ' '; c < 128; c++) {
		bmap = font + (c - ' ')*bytesize;
		printf("// %02x (%c) \n", c, c);
		for(int i = 1; i < bytesize; i++) {
			bits = 0;
			for(int p = 0; p < bytesize; p++) {
				bits |= ( bmap[7-p]>>(7-i) & 1 ? 1<<(7-p) : 0 );
			}
			printf("0x%02x, // %s\n", bits, binary(bits));
		}
		printf("\n");
	}

	return EXIT_SUCCESS;
}

char * binary(uint8 u) {
	static char str[16];
	for(int i = 0; i < 8; i++) {
		str[i] = ( u>>(7-i) & 1 ? '1' : '0' );
	}
	str[8] = 0;
	return str;
}

uint8 font[] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x30,0x78,0x78,0x30,0x30,0x00,0x30,0x00,
0x6C,0x6C,0x6C,0x00,0x00,0x00,0x00,0x00,
0x6C,0x6C,0xFE,0x6C,0xFE,0x6C,0x6C,0x00,
0x18,0x3E,0x60,0x3C,0x06,0x7C,0x18,0x00,
0x00,0x63,0x66,0x0C,0x18,0x33,0x63,0x00,
0x1C,0x36,0x1C,0x3B,0x6E,0x66,0x3B,0x00,
0x30,0x30,0x60,0x00,0x00,0x00,0x00,0x00,
0x0C,0x18,0x30,0x30,0x30,0x18,0x0C,0x00,
0x30,0x18,0x0C,0x0C,0x0C,0x18,0x30,0x00,
0x00,0x66,0x3C,0xFF,0x3C,0x66,0x00,0x00,
0x00,0x30,0x30,0xFC,0x30,0x30,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x30,
0x00,0x00,0x00,0x7E,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,
0x03,0x06,0x0C,0x18,0x30,0x60,0x40,0x00,
0x3E,0x63,0x63,0x6B,0x63,0x63,0x3E,0x00,
0x18,0x38,0x58,0x18,0x18,0x18,0x7E,0x00,
0x3C,0x66,0x06,0x1C,0x30,0x66,0x7E,0x00,
0x3C,0x66,0x06,0x1C,0x06,0x66,0x3C,0x00,
0x0E,0x1E,0x36,0x66,0x7F,0x06,0x0F,0x00,
0x7E,0x60,0x7C,0x06,0x06,0x66,0x3C,0x00,
0x1C,0x30,0x60,0x7C,0x66,0x66,0x3C,0x00,
0x7E,0x66,0x06,0x0C,0x18,0x18,0x18,0x00,
0x3C,0x66,0x66,0x3C,0x66,0x66,0x3C,0x00,
0x3C,0x66,0x66,0x3E,0x06,0x0C,0x38,0x00,
0x00,0x18,0x18,0x00,0x00,0x18,0x18,0x00,
0x00,0x18,0x18,0x00,0x00,0x18,0x18,0x30,
0x0C,0x18,0x30,0x60,0x30,0x18,0x0C,0x00,
0x00,0x00,0x7E,0x00,0x00,0x7E,0x00,0x00,
0x30,0x18,0x0C,0x06,0x0C,0x18,0x30,0x00,
0x3C,0x66,0x06,0x0C,0x18,0x00,0x18,0x00,
0x3E,0x63,0x6F,0x69,0x6F,0x60,0x3E,0x00,
0x18,0x3C,0x66,0x66,0x7E,0x66,0x66,0x00,
0x7E,0x33,0x33,0x3E,0x33,0x33,0x7E,0x00,
0x1E,0x33,0x60,0x60,0x60,0x33,0x1E,0x00,
0x7C,0x36,0x33,0x33,0x33,0x36,0x7C,0x00,
0x7F,0x31,0x34,0x3C,0x34,0x31,0x7F,0x00,
0x7F,0x31,0x34,0x3C,0x34,0x30,0x78,0x00,
0x1E,0x33,0x60,0x60,0x67,0x33,0x1F,0x00,
0x66,0x66,0x66,0x7E,0x66,0x66,0x66,0x00,
0x3C,0x18,0x18,0x18,0x18,0x18,0x3C,0x00,
0x0F,0x06,0x06,0x06,0x66,0x66,0x3C,0x00,
0x73,0x33,0x36,0x3C,0x36,0x33,0x73,0x00,
0x78,0x30,0x30,0x30,0x31,0x33,0x7F,0x00,
0x63,0x77,0x7F,0x7F,0x6B,0x63,0x63,0x00,
0x63,0x73,0x7B,0x6F,0x67,0x63,0x63,0x00,
0x3E,0x63,0x63,0x63,0x63,0x63,0x3E,0x00,
0x7E,0x33,0x33,0x3E,0x30,0x30,0x78,0x00,
0x3C,0x66,0x66,0x66,0x6E,0x3C,0x0E,0x00,
0x7E,0x33,0x33,0x3E,0x36,0x33,0x73,0x00,
0x3C,0x66,0x30,0x18,0x0C,0x66,0x3C,0x00,
0x7E,0x5A,0x18,0x18,0x18,0x18,0x3C,0x00,
0x66,0x66,0x66,0x66,0x66,0x66,0x7E,0x00,
0x66,0x66,0x66,0x66,0x66,0x3C,0x18,0x00,
0x63,0x63,0x63,0x6B,0x7F,0x77,0x63,0x00,
0x63,0x63,0x36,0x1C,0x1C,0x36,0x63,0x00,
0x66,0x66,0x66,0x3C,0x18,0x18,0x3C,0x00,
0x7F,0x63,0x46,0x0C,0x19,0x33,0x7F,0x00,
0x3C,0x30,0x30,0x30,0x30,0x30,0x3C,0x00,
0x60,0x30,0x18,0x0C,0x06,0x03,0x01,0x00,
0x3C,0x0C,0x0C,0x0C,0x0C,0x0C,0x3C,0x00,
0x08,0x1C,0x36,0x63,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,
0x18,0x18,0x0C,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x3C,0x06,0x3E,0x66,0x3B,0x00,
0x70,0x30,0x3E,0x33,0x33,0x33,0x6E,0x00,
0x00,0x00,0x3C,0x66,0x60,0x66,0x3C,0x00,
0x0E,0x06,0x3E,0x66,0x66,0x66,0x3B,0x00,
0x00,0x00,0x3C,0x66,0x7E,0x60,0x3C,0x00,
0x1C,0x36,0x30,0x78,0x30,0x30,0x78,0x00,
0x00,0x00,0x3B,0x66,0x66,0x3E,0x06,0x7C,
0x70,0x30,0x36,0x3B,0x33,0x33,0x73,0x00,
0x18,0x00,0x38,0x18,0x18,0x18,0x3C,0x00,
0x06,0x00,0x06,0x06,0x06,0x66,0x66,0x3C,
0x70,0x30,0x33,0x36,0x3C,0x36,0x73,0x00,
0x38,0x18,0x18,0x18,0x18,0x18,0x3C,0x00,
0x00,0x00,0x66,0x7F,0x7F,0x6B,0x63,0x00,
0x00,0x00,0x7C,0x66,0x66,0x66,0x66,0x00,
0x00,0x00,0x3C,0x66,0x66,0x66,0x3C,0x00,
0x00,0x00,0x6E,0x33,0x33,0x3E,0x30,0x78,
0x00,0x00,0x3B,0x66,0x66,0x3E,0x06,0x0F,
0x00,0x00,0x6E,0x3B,0x33,0x30,0x78,0x00,
0x00,0x00,0x3E,0x60,0x3C,0x06,0x7C,0x00,
0x08,0x18,0x3E,0x18,0x18,0x1A,0x0C,0x00,
0x00,0x00,0x66,0x66,0x66,0x66,0x3B,0x00,
0x00,0x00,0x66,0x66,0x66,0x3C,0x18,0x00,
0x00,0x00,0x63,0x6B,0x7F,0x7F,0x36,0x00,
0x00,0x00,0x63,0x36,0x1C,0x36,0x63,0x00,
0x00,0x00,0x66,0x66,0x66,0x3E,0x06,0x7C,
0x00,0x00,0x7E,0x4C,0x18,0x32,0x7E,0x00,
0x0E,0x18,0x18,0x70,0x18,0x18,0x0E,0x00,
0x0C,0x0C,0x0C,0x00,0x0C,0x0C,0x0C,0x00,
0x70,0x18,0x18,0x0E,0x18,0x18,0x70,0x00,
0x3B,0x6E,0x00,0x00,0x00,0x00,0x00,0x00,
0x1C,0x36,0x36,0x1C,0x00,0x00,0x00,0x00
};
